{"ast":null,"code":"import _classCallCheck from \"/Users/Laryna/Lambda/Front-End-Architect-Laryna-Billinghurst-/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Laryna/Lambda/Front-End-Architect-Laryna-Billinghurst-/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Laryna/Lambda/Front-End-Architect-Laryna-Billinghurst-/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Laryna/Lambda/Front-End-Architect-Laryna-Billinghurst-/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Laryna/Lambda/Front-End-Architect-Laryna-Billinghurst-/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Laryna/Lambda/Front-End-Architect-Laryna-Billinghurst-/src/components/ImgDrop.js\";\nimport React from 'react';\nimport Dropzone from 'react-dropzone';\nimport request from 'superagent';\nimport { connect } from 'react-redux';\nimport { addPhoto } from '../actions';\nvar CLOUDINARY_UPLOAD_PRESET = 'hgdd9gxv';\nvar CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/expat_journal/upload';\n\nvar ImgDrop =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ImgDrop, _React$Component);\n\n  function ImgDrop() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ImgDrop);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ImgDrop)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      img_url: '',\n      uploadedFile: null\n    };\n\n    _this.handleAddPhoto = function (_, res) {\n      var img_url = _this.state.img_url;\n\n      _this.props.addPhoto(localStorage.getItem('user_id'), {\n        img_url: img_url\n      });\n\n      _this.setState({\n        img_url: res.body.secure_url\n      });\n    };\n\n    _this.onDrop = function (acceptedFiles) {\n      console.log(acceptedFiles);\n\n      _this.setState({\n        uploadedFile: acceptedFiles[0]\n      });\n\n      _this.handleImageUpload(acceptedFiles[0]);\n    };\n\n    _this.handleImageUpload = function (file) {\n      var upload = request.post(CLOUDINARY_UPLOAD_URL).field('upload_preset', CLOUDINARY_UPLOAD_PRESET).field('file', file).field('api_key', 882347815869688);\n      upload.end(function (err, res) {\n        if (err) {\n          console.error(err);\n        }\n\n        if (res.body.secure_url !== '') {\n          _this.setState({\n            img_url: res.body.secure_url\n          });\n\n          console.log(res.body.secure_url);\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ImgDrop, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Dropzone, {\n        onDrop: this.onDrop,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, function (_ref) {\n        var getRootProps = _ref.getRootProps;\n        return React.createElement(\"div\", Object.assign({}, getRootProps(), {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"dropzone\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, \"Drag and Drop Images Here\"), React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this2.handleAddPhoto();\n          },\n          type: \"button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, \"Add New Image\"));\n      });\n    }\n  }]);\n\n  return ImgDrop;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    error: state.error,\n    addingPhoto: state.addingPhoto\n  };\n};\n\nexport default connect(mapStateToProps, {\n  addPhoto: addPhoto\n})(ImgDrop);","map":{"version":3,"sources":["/Users/Laryna/Lambda/Front-End-Architect-Laryna-Billinghurst-/src/components/ImgDrop.js"],"names":["React","Dropzone","request","connect","addPhoto","CLOUDINARY_UPLOAD_PRESET","CLOUDINARY_UPLOAD_URL","ImgDrop","state","img_url","uploadedFile","handleAddPhoto","_","res","props","localStorage","getItem","setState","body","secure_url","onDrop","acceptedFiles","console","log","handleImageUpload","file","upload","post","field","end","err","error","getRootProps","Component","mapStateToProps","addingPhoto"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Dropzone from 'react-dropzone';\nimport request from 'superagent';\nimport { connect } from 'react-redux';\nimport { addPhoto } from '../actions';\n\n\nconst CLOUDINARY_UPLOAD_PRESET = 'hgdd9gxv';\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/expat_journal/upload';\n\nclass ImgDrop extends React.Component {\n    state = {\n        img_url: '',\n        uploadedFile: null\n      }\n      handleAddPhoto = (_, res) => {\n        const { img_url } = this.state;\n        this.props.addPhoto(localStorage.getItem('user_id'),{ img_url });\n        this.setState({ img_url: res.body.secure_url });\n      };\n    \n      onDrop = acceptedFiles => {\n        console.log(acceptedFiles);\n        this.setState({\n          uploadedFile: acceptedFiles[0]\n        })\n    \n        this.handleImageUpload(acceptedFiles[0]);\n      }\n    \n      handleImageUpload = file => {\n        let upload = request.post(CLOUDINARY_UPLOAD_URL)\n          .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\n          .field('file', file)\n          .field('api_key', 882347815869688)\n    \n        upload.end((err, res) => {\n          if (err) {\n            console.error(err)\n          }\n    \n          if (res.body.secure_url !== '') {\n            this.setState({\n              img_url: res.body.secure_url\n            });\n            console.log(res.body.secure_url)\n          }\n        });\n      }\n    \n      render() {\n        return (\n          <Dropzone onDrop={this.onDrop}>\n            {({getRootProps}) => (\n            <div {...getRootProps()}>\n              <p className='dropzone'>Drag and Drop Images Here</p>\n              <button onClick={() => this.handleAddPhoto()} type=\"button\">\n              Add New Image\n              </button>\n            </div>\n            )}\n          </Dropzone>\n        )\n      }\n    }\n    \n    const mapStateToProps = state => {\n      return {\n        error: state.error,\n        addingPhoto: state.addingPhoto\n      };\n    };\n    \n    export default connect(mapStateToProps, { addPhoto })(ImgDrop);"]},"metadata":{},"sourceType":"module"}